<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE xwork PUBLIC "-//OpenSymphony Group//XWork 1.0//EN" "http://www.opensymphony.com/xwork/xwork-1.0.dtd">
<xwork>

		<include file="webwork-default.xml" />

		<package name="default" extends="webwork-default">

			<interceptors>

				<interceptor name="loginForumInterceptor" class="org.javabb.interceptor.LoginInterceptor" />
				<interceptor name="loginAdminInterceptor" class="org.javabb.interceptor.LoginAdminInterceptor" />
				<interceptor name="loginModeradorInterceptor" class="org.javabb.interceptor.LoginModeradorInterceptor" />
				<interceptor name="verifycookie" class="verifyCookieInterceptor" />
				<interceptor name="delayInterceptor" class="delayInterceptor" />
				<interceptor name="exceptionInterceptor" class="org.javabb.interceptor.ExceptionInterceptor" />
				<interceptor name="configInterceptor" class="configInterceptor" />

				
			<interceptor-stack name="javabbStack">
				<interceptor-ref name="component" />
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="exceptionInterceptor" />
				<interceptor-ref name="delayInterceptor" />
				<interceptor-ref name="configInterceptor" />
				<interceptor-ref name="verifycookie"/>
			</interceptor-stack>

			<interceptor-stack name="loginforum">
				<interceptor-ref name="exceptionInterceptor" />
				<interceptor-ref name="delayInterceptor" />
				<interceptor-ref name="configInterceptor" />
				<interceptor-ref name="verifycookie" />
				<interceptor-ref name="component" />
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="loginForumInterceptor" />
			</interceptor-stack>
				
			<interceptor-stack name="loginModeradorStack">
				<interceptor-ref name="exceptionInterceptor" />
				<interceptor-ref name="configInterceptor" />
				<interceptor-ref name="verifycookie" />
				<interceptor-ref name="component" />
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="loginModeradorInterceptor" />
			</interceptor-stack>

			<interceptor-stack name="loginadmin">
				<interceptor-ref name="exceptionInterceptor" />
				<interceptor-ref name="configInterceptor" />
				<interceptor-ref name="verifycookie" />
				<interceptor-ref name="component" />
				<interceptor-ref name="defaultStack" />
				<interceptor-ref name="loginAdminInterceptor" />
			</interceptor-stack>
				
				

        </interceptors>
		<default-interceptor-ref name="javabbStack"/>

		<!-- GLOBAL RESULTS -->
		<global-results>
			<result name="login" type="redirect">login.jbb</result>
            <result name="error" type="velocity">
                <param name="location">/forum/error.vm</param>
            </result>
            <result name="flood_control" type="velocity">
                <param name="location">/forum/flood.vm</param>
            </result>
		</global-results>
		<!-- // GLOBAL RESULTS -->


        <!-- CATEGORY -->
        <action name="forum" class="categoryAction" method="loadCategory">
            <result name="success" type="velocity">
                <param name="location">/forum/foruns.vm</param>
            </result>
        </action>

        <action name="loadCategory" class="categoryAction" method="loadCategory">
            <result name="success" type="velocity">
                <param name="location">/forum/foruns.vm</param>
            </result>
        </action>
			
        <action name="markAsRead" class="categoryAction" method="markAllTopicsInCatAsRead">
            <result name="success" type="velocity">
                <param name="location">/forum/redirect.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>
        <!-- // CATEGORY -->

        <!-- FORUM -->

        <action name="viewforum" class="topicAction" method="listaTopics">
            <result name="success" type="velocity">
                <param name="location">/forum/topics.vm</param>
            </result>
        </action>


        <action name="viewtopic" class="topicAction" method="showTopic">
            <result name="success" type="velocity">
                <param name="location">/forum/posts.vm</param>
            </result>
            <result name="no_messages" type="velocity">
                <param name="location">/forum/topics_found.vm</param>
            </result>
        </action>


        <action name="quote" class="postAction" method="returnQuoteMsg">
            <result name="success" type="velocity">
                <param name="location">/forum/reply.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>

        <action name="reply" class="postAction" method="returnQuoteMsg">
            <result name="success" type="velocity">
                <param name="location">/forum/reply.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>

		<action name="insertmessage" class="postAction" method="insertPost">
            <result name="success" type="velocity">
                <param name="location">/forum/redirect.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>

        <action name="new_topic" class="postAction" method="checkIfHasPermission">
            <result name="success" type="velocity">
                <param name="location">/forum/newtopic.vm</param>
            </result>
			<interceptor-ref name="loginforum" />
        </action>

        <action name="insert_topic" class="postAction" method="insertTopicPost">
            <result name="success" type="velocity">
                <param name="location">/forum/redirect.vm</param>
            </result>
			<interceptor-ref name="loginforum" />
        </action>

        <action name="viewprofile" class="userAction" method="loadUsersPortal">
            <result name="success" type="velocity">
                <param name="location">/forum/viewprofile.vm</param>
            </result>
        </action>

        <action name="login" class="userAction">
            <result name="success" type="dispatcher">
                <param name="location">/forum/login.vm</param>
            </result>
        </action>

        <action name="verifylogin" class="userAction" method="verifyLogin">
			<result name="success" type="redirect">forum.jbb</result>
			
            <result name="input" type="dispatcher">
                <param name="location">/forum/afterlogin.vm</param>
            </result>
			<interceptor-ref name="component" />
			<interceptor-ref name="defaultStack" />
			<interceptor-ref name="exceptionInterceptor" />
			<interceptor-ref name="configInterceptor" />
        </action>

		<action name="checkForLogin" class="userAction" method="verifyLogin">
            <result name="success" type="velocity">
                <param name="location">/forum/redirect.vm</param>
            </result>
			<interceptor-ref name="component" />
			<interceptor-ref name="defaultStack" />
			<interceptor-ref name="exceptionInterceptor" />
			<interceptor-ref name="configInterceptor" />
        </action>

        <action name="logout" class="userAction" method="logout">
            <result name="success" type="velocity">
                <param name="location">/forum/redirect.vm</param>
            </result>
			<interceptor-ref name="javabbStack" />
        </action>
			

        <action name="deletepost" class="postAction" method="deletePost">
            <result name="success" type="velocity">
                <param name="location">/forum/redirect.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>

        <!--action name="show_edit_topic" class="postAction" method="loadPost">
            <result name="success" type="chain">
                <param name="actionName">show_edit_topic_post</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action-->

        <action name="show_edit_topic" class="topicAction" method="loadTopicNoSumView">
            <result name="success" type="dispatcher">
                <param name="location">/forum/edit_post_topic.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>

        <action name="edit_topic" class="postAction" method="updatePostTopic">
            <result name="success" type="velocity">
                <param name="location">/forum/redirect.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>

        <action name="show_edit_post" class="postAction" method="loadPost">
            <result name="success" type="dispatcher">
                <param name="location">/forum/edit_post_topic.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>

        <action name="edit_post" class="postAction" method="updatePost">
            <result name="success" type="velocity">
                <param name="location">/forum/redirect.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>

        <action name="show_edit_profile" class="userAction" method="loadEditUsersPortal">
            <result name="success" type="velocity">
                <param name="location">/forum/editprofile.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>

        <action name="save_edit_profile" class="userAction" method="updateUsersPortal">
            <result name="success" type="velocity">
                <param name="location">/forum/redirect.vm</param>
            </result>
            <result name="REG_ERROR" type="velocity">
                <param name="location">/forum/editprofile.vm</param>
            </result>
            <interceptor-ref name="loginforum" />
        </action>
			
		<action name="doUpload" class="userAction" method="uploadProfileImage">
			<interceptor-ref name="loginforum"/>
			<interceptor-ref name="fileUpload">
				<param name="allowedTypes">
					image/png,image/gif,image/jpeg
				</param>
			</interceptor-ref>
			<result name="success" type="velocity">
				<param name="location">/forum/redirect.vm</param>
			</result>
		</action>

        <action name="new_member" class="userAction" method="loadNewMember">
            <result name="success" type="velocity">
                <param name="location">/forum/editprofile.vm</param>
            </result>
        </action>

        <action name="save_new_member" class="userAction" method="insertUsersPortal">
			<result name="success" type="redirect">login.jbb?param=justcreated</result>
            <result name="input" type="velocity">
                <param name="location">/forum/editprofile.vm</param>
            </result>
            <result name="REG_ERROR" type="velocity">
                <param name="location">/forum/editprofile.vm</param>
            </result>
        </action>

        <action name="avatar" class="userAction">
            <result name="success" type="velocity">
                <param name="location">/forum/editprofile_upload_avatar.vm</param>
            </result>
			<interceptor-ref name="javabbStack" />
        </action>

	    <action name="doAvatar" class="userAction" method="uploadAvatar">
			<result name="success" type="redirect">avatar.jbb</result>
			<interceptor-ref name="javabbStack" />
        </action>
			
        <action name="member_list" class="userAction" method="listAllRegisteredUsers">
            <result name="success" type="velocity">
                <param name="location">/forum/member_list.vm</param>
            </result>
        </action>

        <action name="review_topic" class="topicAction" method="reviewTopic">
            <result name="success" type="velocity">
                <param name="location">/forum/review_topic.vm</param>
            </result>
        </action>

        <action name="search_author" class="postAction" method="searchAuthor">
            <result name="success" type="velocity">
                <param name="location">/forum/search_author.vm</param>
            </result>
            <interceptor-ref name="javabbStack" />
        </action>
			
        <action name="unanswered_posts" class="postAction" method="listUnAnswaredPosts">
            <result name="success" type="velocity">
                <param name="location">/forum/unanswered_posts.vm</param>
            </result>
            <interceptor-ref name="javabbStack" />
        </action>

        <action name="newPosts" class="topicAction" method="listUnreadTopics">
            <result name="success" type="velocity">
                <param name="location">/forum/topics_found.vm</param>
            </result>
            <interceptor-ref name="javabbStack" />
        </action>
			
        <action name="recentTopics" class="topicAction" method="listRecentTopics">
            <result name="success" type="velocity">
                <param name="location">/forum/topics_found.vm</param>
            </result>
            <interceptor-ref name="javabbStack" />
        </action>
	
        <!--// FORUM -->



		<action name="search" class="searchAction">
			<result name="success" type="velocity">
				<param name="location">/forum/search.vm</param>
			</result>
		</action>

		<!-- action name="doSearchBB" class="searchAction" method="search">
			<result name="success" type="velocity">
				<param name="location">/forum/search.vm</param>
            </result>
			<result name="empty" type="velocity">
				<param name="location">/forum/search.vm</param>
			</result>
		</action>

		<action name="doSearch" class="searchAction" method="search">
			<result name="success" type="velocity">
				<param name="location">/forum/search.vm</param>
            </result>
			<result name="empty" type="velocity">
				<param name="location">/forum/search.vm</param>
			</result>
		</action-->

			

		<action name="listSmiles" class="smileAction" method="listSmiles">
			<result name="success" type="velocity">
				<param name="location">/forum/smiles.vm</param>
            </result>
		</action>

		<!-- FORGET PASSWORD -->
		
		<action name="forget_pwd" class="userAction">
			<result name="success" type="velocity">
				<param name="location">/forum/forget_pwd.vm</param>
			</result>
		</action>
		
		<action name="find_user_by_user_name" class="userAction" method="findUserByUserName">
			<result name="success" type="velocity">
				<param name="location">/forum/forget_pwd.vm</param>
			</result>
            <result name="input" type="velocity">
                <param name="location">/forum/forget_pwd.vm</param>
            </result>
		</action>
		
		<action name="verify_forget_pwd" class="userAction" method="verifyForgetPwd">
			<result name="success" type="velocity">
				<param name="location">/forum/redirect.vm</param>
			</result>
			<!-- INVALID HASHCODE -->
            <result name="input" type="velocity">
                <param name="location">/forum/error_message.vm</param>
            </result>
		</action>
		
		<!-- // FORGET PASSWORD -->

			
        <action name="view_legend" class="userAction" method="viewLegend">
            <result name="success" type="velocity">
                <param name="location">/forum/legend.vm</param>
            </result>
        </action>
			
        <action name="spy" class="userAction">
            <result name="success" type="velocity">
                <param name="location">/forum/spy_topics.vm</param>
            </result>
        </action>
			
        <action name="spy_table" class="userAction">
            <result name="success" type="velocity">
                <param name="location">/forum/spy_table.vm</param>
            </result>
        </action>
			
		<action name="formatBBCodeNewTopic" class="postAction" method="formatBBCodePreviewTopic">
            <result name="success" type="velocity">
                <param name="location">/forum/newtopic.vm</param>
            </result>
        </action>
        
		<action name="formatBBCodeReply" class="postAction" method="formatBBCodePreviewPost">
            <result name="success" type="velocity">
                <param name="location">/forum/reply.vm</param>
            </result>
        </action>        
			
			
			
    </package>

	<!-- ADMIN MODULE -->
	<include file="admin.xml" />
	
	<!-- PM MODULE -->
	<include file="pm.xml" />
	
	<!-- WATCH MODULE -->
	<include file="watch.xml" />

	<!-- RSS MODULE -->
	<include file="rss.xml" />

	<!-- INTEGRATION MODULE -->
	<include file="integration.xml" />

	<!-- FAVORITE MODULE -->
	<include file="favorite.xml" />	
	
	<!-- FAVORITE MODULE -->
	<include file="file.xml" />	
	
	<include file="spy.xml" />
	
	<include file="home.xml" />
	
	<include file="contentMigration.xml" />
	
	<include file="newMigration.xml" />
	
</xwork>